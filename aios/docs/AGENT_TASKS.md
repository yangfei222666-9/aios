# AIOS Agent 任务配置

## Agent 角色分工

### 1. Monitor Agent（监控专员）
**职责：** 实时监控 AIOS 系统健康状态
**任务：**
- 每 5 分钟检查 Evolution Score
- 监控 Reactor 执行率
- 检测 Playbook 失败模式
- 发现异常立即告警

**触发条件：**
- Evolution Score < 0.5（降级）
- Reactor 执行率 < 30%
- 连续 3 次 Playbook 失败

### 2. Analyst Agent（分析专家）
**职责：** 分析 AIOS 历史数据，找出优化方向
**任务：**
- 每天分析 baseline.jsonl 趋势
- 识别高频错误模式
- 评估 Playbook 效果
- 生成优化建议报告

**输出：**
- `aios/analyst_insights.json` - 分析报告
- 包含：趋势分析、问题识别、优化建议

### 3. Optimizer Agent（优化顾问）
**职责：** 根据分析结果生成优化计划
**任务：**
- 每小时读取 Analyst 报告
- 生成可执行的优化行动
- 评估风险级别（low/medium/high）
- 优先处理高价值低风险的优化

**输出：**
- `aios/optimization_plan.json` - 优化计划
- 包含：行动列表、风险评估、预期效果

### 4. Executor Agent（执行专员）
**职责：** 执行低风险优化行动
**任务：**
- 每 30 分钟检查优化计划
- 自动执行 risk=low 的行动
- 记录执行结果
- 失败时自动回滚

**执行范围：**
- 调整 Playbook 参数（超时、冷却时间）
- 清理过期数据
- 优化配置文件
- 重启降级的 Agent

### 5. Validator Agent（验证专家）
**职责：** 验证优化效果
**任务：**
- 每天对比优化前后的指标
- 判断优化是否有效
- 失败的优化自动回滚
- 成功的优化记录到 lessons.json

**验证指标：**
- Evolution Score 是否上升
- Reactor 执行率是否提高
- 错误率是否下降
- 资源使用是否优化

### 6. Learner Agent（学习专家）
**职责：** 从经验中学习，持续改进
**任务：**
- 每天提取成功的优化模式
- 更新 Playbook 库
- 生成新的自动修复规则
- 优化 Agent 协作流程

**学习内容：**
- 哪些 Playbook 最有效
- 哪些错误模式可以预防
- 哪些优化策略成功率高
- 如何提高自动化程度

## 工作流程

```
Monitor → 发现问题 → Analyst → 分析原因 → Optimizer → 生成计划
                                                    ↓
Learner ← 提取经验 ← Validator ← 验证效果 ← Executor ← 执行行动
```

## 任务优先级

### P0（立即处理）
- Evolution Score < 0.3（critical）
- 系统崩溃或服务不可用
- 数据丢失风险

### P1（1小时内）
- Evolution Score < 0.5（degraded）
- Reactor 执行率 < 30%
- 连续失败 > 5 次

### P2（当天处理）
- 性能下降 > 20%
- 磁盘使用率 > 80%
- 内存泄漏迹象

### P3（本周处理）
- 代码优化建议
- 文档更新
- 非关键功能改进

## 自动化规则

### 自动执行（无需确认）
- 清理过期日志（>7天）
- 调整 Playbook 超时时间
- 重启闲置 Agent
- 更新配置文件（低风险）

### 需要确认
- 修改核心配置
- 删除重要数据
- 重启关键服务
- 高风险优化

### 禁止自动执行
- 修改代码逻辑
- 删除 Playbook
- 修改安全策略
- 涉及用户数据的操作

## 监控指标

### 核心指标
- **Evolution Score** - 目标：≥0.7
- **Reactor 执行率** - 目标：≥50%
- **工具成功率** - 目标：≥95%
- **Agent 响应时间** - 目标：<3s

### 资源指标
- **CPU 使用率** - 目标：<70%
- **内存使用率** - 目标：<80%
- **磁盘使用率** - 目标：<75%
- **事件日志大小** - 目标：<100MB

### 质量指标
- **错误率** - 目标：<5%
- **平均修复时间** - 目标：<5分钟
- **自动化覆盖率** - 目标：≥60%
- **验证通过率** - 目标：≥80%

## 报告机制

### 每日报告（9:00）
- 昨日 Evolution Score 趋势
- Reactor 执行统计
- 发现的问题和已修复的问题
- 今日优化计划

### 每周报告（周一 9:00）
- 本周系统健康度总结
- 优化效果评估
- 新增 Playbook 统计
- 下周改进计划

### 异常报告（实时）
- Evolution Score 降级
- 系统崩溃
- 数据异常
- 安全告警

## 协作机制

### Agent 间通信
- 通过 JSON 文件交换数据
- 使用 Event Bus 发送事件
- 共享 `aios/data/` 目录
- 避免直接调用

### 冲突解决
- 同一资源只能有一个 Agent 操作
- 使用文件锁防止并发冲突
- 优先级高的 Agent 优先执行
- 冲突时记录到日志

### 失败处理
- 3 次失败后自动熔断
- 5 分钟后自动恢复
- 记录失败原因到 lessons.json
- 通知 Learner Agent 学习

## 成功标准

### 短期目标（1个月）
- Evolution Score 稳定在 0.6+
- Reactor 执行率 > 50%
- 自动化覆盖率 > 40%
- 平均修复时间 < 10分钟

### 中期目标（3个月）
- Evolution Score 稳定在 0.7+
- Reactor 执行率 > 70%
- 自动化覆盖率 > 60%
- 平均修复时间 < 5分钟

### 长期目标（6个月）
- Evolution Score 稳定在 0.8+
- Reactor 执行率 > 80%
- 自动化覆盖率 > 80%
- 平均修复时间 < 3分钟

---

**版本：** v1.0  
**更新时间：** 2026-02-24  
**负责人：** 珊瑚海 + 小九
