{
  "name": "circuit_breaker",
  "description": "熔断器 - 连续失败自动熔断，冷却后恢复",
  "trigger": {
    "event_type": "task_failed",
    "conditions": {
      "consecutive_failures": {"$gte": 3},
      "time_window": "5m"
    }
  },
  "actions": [
    {
      "type": "log",
      "message": "检测到连续失败，触发熔断"
    },
    {
      "type": "circuit_break",
      "agent_id": "{agent_id}",
      "duration": "5m"
    },
    {
      "type": "notify",
      "channel": "telegram",
      "message": "⚠️ {agent_id} 已熔断，5分钟后自动恢复"
    },
    {
      "type": "schedule_recovery",
      "after": "5m",
      "action": "reset_circuit"
    }
  ],
  "priority": "critical",
  "enabled": true
}
