# AIOS Demo 演示

## API Health Check Demo - 自动修复演示

### 功能说明

这个 demo 展示了 AIOS 的完整自动化闭环：

1. **监控** - 每 2 秒检查一次 API 健康状态
2. **检测** - 发现 API 返回 500 错误
3. **事件** - EventBus 发送故障事件
4. **响应** - Reactor 自动触发修复剧本
5. **修复** - 重启 API 服务
6. **验证** - 确认服务恢复正常
7. **评分** - 系统评分自动恢复

### 运行方式

```bash
python demo/api_health_demo.py
```

或者使用完整路径：

```bash
"C:\Program Files\Python312\python.exe" demo/api_health_demo.py
```

### Demo 流程

```
时间轴：
0s   - 启动 API 服务（端口 8765）
1s   - 启动健康监控（每 2 秒检查）
3s   - 第一次健康检查：✅ 正常
7s   - 正常运行中...
12s  - 💥 注入故障（API 返回 500）
13s  - ❌ 检测到故障
13s  - ⚡ Reactor 触发修复
13s  - 🔧 重启 API 服务
14s  - ✅ 服务恢复正常
17s  - ✅ 验证恢复成功
21s  - 🎉 Demo 完成
```

### 技术特点

- **零外部依赖** - 只使用 Python 标准库
- **自包含** - 单文件运行，无需配置
- **跨平台** - Windows/Linux/macOS 通用
- **彩色输出** - 清晰的终端日志
- **完整闭环** - 展示 AIOS 核心能力

### 输出示例

```
======================================================================
AIOS API Health Check Demo - 自动修复演示
======================================================================

[18:44:02] 🎬 Demo 开始
[18:44:02] 📍 阶段 1: 启动 API 服务
[18:44:02] 🚀 API 服务启动 (端口 8765)
[18:44:03] 📍 阶段 2: 启动健康监控
[18:44:03] 👁️  健康监控启动 (间隔 2.0s)
[18:44:05] ✅ API 健康检查：正常
...
[18:44:13] ❌ API 健康检查：失败 (HTTP 500)
[18:44:13] ⚡ Reactor 触发：检测到 API 故障
[18:44:13] 📋 执行修复剧本：restart_api_service
[18:44:13] 🔧 开始修复：重启 API 服务...
[18:44:13] ✅ 修复完成：API 服务已重启
...
[18:44:21] 🎉 Demo 完成！
[18:44:21] 📊 最终系统评分: 100.0/100
```

### 核心组件

- **MockAPIServer** - 模拟 HTTP API 服务
- **HealthMonitor** - 健康检查监控器
- **EventBus** - 事件总线（简化版）
- **Reactor** - 自动响应引擎（简化版）
- **ScoreTracker** - 评分追踪器

### 适用场景

这个 demo 可以用于：

- 向他人展示 AIOS 的核心能力
- 理解 AIOS 的工作原理
- 测试自动修复流程
- 作为其他 demo 的模板
