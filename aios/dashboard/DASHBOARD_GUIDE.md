# Dashboard ä½¿ç”¨æŒ‡å—

## ç›®å½•
- [ç®€ä»‹](#ç®€ä»‹)
- [å¯åŠ¨æ–¹æ³•](#å¯åŠ¨æ–¹æ³•)
- [ç•Œé¢è¯´æ˜](#ç•Œé¢è¯´æ˜)
- [å†³ç­–å¡ç‰‡è§£è¯»](#å†³ç­–å¡ç‰‡è§£è¯»)
- [å®æ—¶ç›‘æ§](#å®æ—¶ç›‘æ§)
- [æ•°æ®åˆ†æ](#æ•°æ®åˆ†æ)
- [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)

---

## ç®€ä»‹

AIOS Dashboard æ˜¯ä¸€ä¸ªå®æ—¶ç›‘æ§å·¥å…·ï¼Œç”¨äºå¯è§†åŒ– UnifiedRouter çš„å†³ç­–è¿‡ç¨‹ã€‚

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ğŸ“Š **å®æ—¶å†³ç­–å¡ç‰‡** - WebSocket æ¨é€æœ€æ–°å†³ç­–
- ğŸ“ˆ **ç»Ÿè®¡æŒ‡æ ‡** - Agent åˆ†å¸ƒã€æ¨¡å‹ä½¿ç”¨ã€å†³ç­–å»¶è¿Ÿ
- ğŸ” **å†³ç­–å®¡è®¡** - å®Œæ•´çš„å†³ç­–å†å²å’Œç†ç”±
- ğŸ¯ **ç½®ä¿¡åº¦åˆ†æ** - å†³ç­–è´¨é‡è¯„ä¼°

**æŠ€æœ¯æ ˆï¼š**
- åç«¯ï¼šFastAPI + WebSocket
- å‰ç«¯ï¼šåŸç”Ÿ HTML/CSS/JSï¼ˆæ— ä¾èµ–ï¼‰
- æ•°æ®ï¼šJSONL æ—¥å¿—æ–‡ä»¶

---

## å¯åŠ¨æ–¹æ³•

### æ–¹æ³• 1ï¼šPython è„šæœ¬

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd aios

# å¯åŠ¨ Dashboard
python start_dashboard.py

# è¾“å‡ºï¼š
# INFO:     Started server process [12345]
# INFO:     Uvicorn running on http://127.0.0.1:8765
# INFO:     Application startup complete.
```

### æ–¹æ³• 2ï¼šæ‰¹å¤„ç†è„šæœ¬ï¼ˆWindowsï¼‰

```bash
# åŒå‡»è¿è¡Œ
aios/dashboard/start_dashboard.bat

# æˆ–å‘½ä»¤è¡Œ
cd aios/dashboard
start_dashboard.bat
```

### æ–¹æ³• 3ï¼šç›´æ¥è¿è¡Œ

```bash
# ä½¿ç”¨ uvicorn
cd aios
uvicorn dashboard.router_dashboard:app --host 127.0.0.1 --port 8765

# ä½¿ç”¨ Python æ¨¡å—
python -m aios.dashboard.router_dashboard
```

### è®¿é—® Dashboard

å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ï¼š
```
http://127.0.0.1:8765
```

### åœæ­¢ Dashboard

```bash
# Windows
aios/dashboard/stop_dashboard.bat

# Linux/Mac
pkill -f router_dashboard

# æˆ–ç›´æ¥ Ctrl+C
```

---

## ç•Œé¢è¯´æ˜

### æ•´ä½“å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AIOS Router Dashboard - å†³ç­–å¡ç‰‡                        â”‚
â”‚  å®æ—¶ç›‘æ§ UnifiedRouter çš„æ¯æ¬¡å†³ç­–                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ç»Ÿè®¡æŒ‡æ ‡åŒºåŸŸ]                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚æ€»å†³ç­–æ•°  â”‚ â”‚å¹³å‡ç½®ä¿¡åº¦â”‚ â”‚Opusä½¿ç”¨  â”‚ â”‚å¹³å‡å»¶è¿Ÿ  â”‚  â”‚
â”‚  â”‚   156    â”‚ â”‚   0.87   â”‚ â”‚   45%    â”‚ â”‚  23ms    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [å†³ç­–å¡ç‰‡åŒºåŸŸ - ç€‘å¸ƒæµ]                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ› debugger / opus-4-6 / high                   â”‚   â”‚
â”‚  â”‚ é«˜é”™è¯¯ç‡ 35.0% / sticky_applied                 â”‚   â”‚
â”‚  â”‚ ç½®ä¿¡åº¦: 0.95 | 14:30:25 | 15ms                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’» coder / opus-4-6 / medium                    â”‚   â”‚
â”‚  â”‚ ç¼–ç ä»»åŠ¡                                         â”‚   â”‚
â”‚  â”‚ ç½®ä¿¡åº¦: 0.80 | 14:28:10 | 12ms                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»Ÿè®¡æŒ‡æ ‡åŒºåŸŸ

**æ€»å†³ç­–æ•°ï¼ˆTotal Decisionsï¼‰**
- æ˜¾ç¤ºè‡ªå¯åŠ¨ä»¥æ¥çš„æ€»å†³ç­–æ¬¡æ•°
- å®æ—¶æ›´æ–°

**å¹³å‡ç½®ä¿¡åº¦ï¼ˆAvg Confidenceï¼‰**
- æ‰€æœ‰å†³ç­–çš„å¹³å‡ç½®ä¿¡åº¦ï¼ˆ0-1ï¼‰
- é«˜äº 0.8 ä¸ºç»¿è‰²ï¼Œ0.6-0.8 ä¸ºé»„è‰²ï¼Œä½äº 0.6 ä¸ºçº¢è‰²

**Opus ä½¿ç”¨ç‡ï¼ˆOpus Usageï¼‰**
- Opus æ¨¡å‹ä½¿ç”¨å æ¯”
- ç”¨äºç›‘æ§æˆæœ¬

**å¹³å‡å»¶è¿Ÿï¼ˆAvg Latencyï¼‰**
- å†³ç­–å¹³å‡è€—æ—¶ï¼ˆæ¯«ç§’ï¼‰
- ç”¨äºç›‘æ§æ€§èƒ½

### å†³ç­–å¡ç‰‡åŒºåŸŸ

**å¡ç‰‡å¸ƒå±€ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Agent Icon] agent_type / model / thinking      â”‚  â† æ ‡é¢˜è¡Œ
â”‚ reason_codes                                    â”‚  â† ç†ç”±è¡Œ
â”‚ ç½®ä¿¡åº¦: 0.95 | 14:30:25 | 15ms                  â”‚  â† å…ƒæ•°æ®è¡Œ
â”‚ [å±•å¼€æŒ‰é’®]                                       â”‚  â† è¯¦æƒ…æŒ‰é’®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Agent å›¾æ ‡ï¼š**
- ğŸ’» coder - ä»£ç å¼€å‘
- ğŸ› debugger - è°ƒè¯•ä¸“å®¶
- âš¡ optimizer - æ€§èƒ½ä¼˜åŒ–
- ğŸ“Š analyst - æ•°æ®åˆ†æ
- ğŸ‘ï¸ monitor - ç³»ç»Ÿç›‘æ§
- ğŸ” researcher - ä¿¡æ¯ç ”ç©¶
- ğŸ—ï¸ architect - æ¶æ„å¸ˆ
- ğŸ‘€ reviewer - ä»£ç å®¡æŸ¥
- ğŸ“ documenter - æ–‡æ¡£ä¸“å‘˜
- ğŸŒ translator - ç¿»è¯‘ä¸“å‘˜
- ğŸ¤– automation - è‡ªåŠ¨åŒ–ä¸“å‘˜
- ğŸš€ deployer - éƒ¨ç½²ä¸“å‘˜
- ğŸ”§ full-stack - å…¨æ ˆå·¥ç¨‹å¸ˆ
- ğŸ§ª tester - æµ‹è¯•å·¥ç¨‹å¸ˆ

**é¢œè‰²ç¼–ç ï¼š**
- ç»¿è‰²è¾¹æ¡† - é«˜ç½®ä¿¡åº¦ï¼ˆâ‰¥ 0.8ï¼‰
- é»„è‰²è¾¹æ¡† - ä¸­ç½®ä¿¡åº¦ï¼ˆ0.6-0.8ï¼‰
- çº¢è‰²è¾¹æ¡† - ä½ç½®ä¿¡åº¦ï¼ˆ< 0.6ï¼‰

---

## å†³ç­–å¡ç‰‡è§£è¯»

### å¡ç‰‡ç¤ºä¾‹ 1ï¼šé«˜é”™è¯¯ç‡è§¦å‘ debugger

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ› debugger / opus-4-6 / high                   â”‚
â”‚ é«˜é”™è¯¯ç‡ 35.0% / sticky_applied                 â”‚
â”‚ ç½®ä¿¡åº¦: 0.95 | 14:30:25 | 15ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£è¯»ï¼š**
- **Agent**: debuggerï¼ˆè°ƒè¯•ä¸“å®¶ï¼‰
- **Model**: opus-4-6ï¼ˆé«˜çº§æ¨¡å‹ï¼‰
- **Thinking**: highï¼ˆæ·±åº¦æ€è€ƒï¼‰
- **Reason**: é«˜é”™è¯¯ç‡ 35.0%ï¼ˆç³»ç»Ÿé”™è¯¯ç‡è¶…è¿‡é˜ˆå€¼ï¼‰
- **Reason**: sticky_appliedï¼ˆé˜²æŠ–æœºåˆ¶ç”Ÿæ•ˆï¼Œæ²¿ç”¨ä¸Šæ¬¡ agentï¼‰
- **Confidence**: 0.95ï¼ˆé«˜ç½®ä¿¡åº¦ï¼‰
- **Time**: 14:30:25ï¼ˆå†³ç­–æ—¶é—´ï¼‰
- **Latency**: 15msï¼ˆå†³ç­–è€—æ—¶ï¼‰

**å«ä¹‰ï¼š** ç³»ç»Ÿæ£€æµ‹åˆ°é«˜é”™è¯¯ç‡ï¼ˆ35%ï¼‰ï¼Œè§¦å‘ debugger agentï¼Œä½¿ç”¨ Opus æ¨¡å‹è¿›è¡Œæ·±åº¦åˆ†æã€‚ç”±äºé˜²æŠ–æœºåˆ¶ï¼Œæ²¿ç”¨äº†ä¸Šæ¬¡çš„ agent é€‰æ‹©ï¼Œç½®ä¿¡åº¦å¾ˆé«˜ã€‚

### å¡ç‰‡ç¤ºä¾‹ 2ï¼šæ€§èƒ½ä¸‹é™è§¦å‘ optimizer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ optimizer / opus-4-6 / high                   â”‚
â”‚ æ€§èƒ½ä¸‹é™ 30.0%                                   â”‚
â”‚ ç½®ä¿¡åº¦: 0.85 | 14:32:10 | 18ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£è¯»ï¼š**
- **Agent**: optimizerï¼ˆæ€§èƒ½ä¼˜åŒ–ä¸“å®¶ï¼‰
- **Model**: opus-4-6ï¼ˆé«˜çº§æ¨¡å‹ï¼‰
- **Thinking**: highï¼ˆæ·±åº¦æ€è€ƒï¼‰
- **Reason**: æ€§èƒ½ä¸‹é™ 30.0%ï¼ˆç³»ç»Ÿæ€§èƒ½ä¸‹é™è¶…è¿‡é˜ˆå€¼ï¼‰
- **Confidence**: 0.85ï¼ˆé«˜ç½®ä¿¡åº¦ï¼‰

**å«ä¹‰ï¼š** ç³»ç»Ÿæ£€æµ‹åˆ°æ€§èƒ½ä¸‹é™ï¼ˆ30%ï¼‰ï¼Œè§¦å‘ optimizer agentï¼Œä½¿ç”¨ Opus æ¨¡å‹è¿›è¡Œæ€§èƒ½åˆ†æå’Œä¼˜åŒ–ã€‚

### å¡ç‰‡ç¤ºä¾‹ 3ï¼šé¢„ç®—é™åˆ¶é™çº§æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’» coder / sonnet-4-5 / medium                  â”‚
â”‚ ç¼–ç ä»»åŠ¡ / budget_exceeded                      â”‚
â”‚ ç½®ä¿¡åº¦: 0.75 | 14:35:00 | 12ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£è¯»ï¼š**
- **Agent**: coderï¼ˆä»£ç å¼€å‘ï¼‰
- **Model**: sonnet-4-5ï¼ˆæ ‡å‡†æ¨¡å‹ï¼Œè€Œé opus-4-6ï¼‰
- **Thinking**: mediumï¼ˆä¸­ç­‰æ€è€ƒï¼‰
- **Reason**: ç¼–ç ä»»åŠ¡ï¼ˆä»»åŠ¡ç±»å‹åŒ¹é…ï¼‰
- **Reason**: budget_exceededï¼ˆOpus é…é¢ç”¨å®Œï¼Œè‡ªåŠ¨é™çº§ï¼‰
- **Confidence**: 0.75ï¼ˆä¸­ç­‰ç½®ä¿¡åº¦ï¼‰

**å«ä¹‰ï¼š** è¿™æ˜¯ä¸€ä¸ªç¼–ç ä»»åŠ¡ï¼Œæœ¬åº”ä½¿ç”¨ Opus æ¨¡å‹ï¼Œä½†ç”±äºé¢„ç®—é™åˆ¶ï¼ˆOpus é…é¢ç”¨å®Œï¼‰ï¼Œè‡ªåŠ¨é™çº§åˆ° Sonnet æ¨¡å‹ã€‚ç½®ä¿¡åº¦ç•¥ä½ï¼Œå› ä¸ºæ¨¡å‹é™çº§å¯èƒ½å½±å“è´¨é‡ã€‚

### å¡ç‰‡ç¤ºä¾‹ 4ï¼šå¤±è´¥å›é€€è§¦å‘äººå·¥ä»‹å…¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âŒ needs_human / - / -                          â”‚
â”‚ max_failures_reached / failure_count: 3         â”‚
â”‚ ç½®ä¿¡åº¦: 0.00 | 14:40:00 | 10ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£è¯»ï¼š**
- **Agent**: needs_humanï¼ˆéœ€è¦äººå·¥ä»‹å…¥ï¼‰
- **Model**: -ï¼ˆæ— æ¨¡å‹ï¼‰
- **Thinking**: -ï¼ˆæ— æ€è€ƒï¼‰
- **Reason**: max_failures_reachedï¼ˆè¾¾åˆ°æœ€å¤§å¤±è´¥æ¬¡æ•°ï¼‰
- **Reason**: failure_count: 3ï¼ˆå¤±è´¥ 3 æ¬¡ï¼‰
- **Confidence**: 0.00ï¼ˆæ— ç½®ä¿¡åº¦ï¼‰

**å«ä¹‰ï¼š** åŒä¸€ä»»åŠ¡å¤±è´¥ 3 æ¬¡åï¼Œç³»ç»Ÿåˆ¤æ–­æ— æ³•è‡ªåŠ¨è§£å†³ï¼Œè§¦å‘äººå·¥ä»‹å…¥æ ‡å¿—ã€‚éœ€è¦äººå·¥å®¡æŸ¥ä»»åŠ¡å’Œé”™è¯¯æ—¥å¿—ã€‚

### å¡ç‰‡ç¤ºä¾‹ 5ï¼šCRITICAL é£é™©ä»»åŠ¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ deployer / opus-4-6 / high                   â”‚
â”‚ CRITICAL é£é™© / éƒ¨ç½²ä»»åŠ¡                         â”‚
â”‚ ç½®ä¿¡åº¦: 0.90 | 14:45:00 | 20ms                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£è¯»ï¼š**
- **Agent**: deployerï¼ˆéƒ¨ç½²ä¸“å‘˜ï¼‰
- **Model**: opus-4-6ï¼ˆé«˜çº§æ¨¡å‹ï¼‰
- **Thinking**: highï¼ˆæ·±åº¦æ€è€ƒï¼‰
- **Reason**: CRITICAL é£é™©ï¼ˆæé«˜é£é™©ä»»åŠ¡ï¼‰
- **Reason**: éƒ¨ç½²ä»»åŠ¡ï¼ˆä»»åŠ¡ç±»å‹åŒ¹é…ï¼‰
- **Confidence**: 0.90ï¼ˆé«˜ç½®ä¿¡åº¦ï¼‰

**å«ä¹‰ï¼š** è¿™æ˜¯ä¸€ä¸ª CRITICAL é£é™©çš„éƒ¨ç½²ä»»åŠ¡ï¼Œç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©æœ€é«˜çº§çš„æ¨¡å‹å’Œæ€è€ƒçº§åˆ«ï¼Œç¡®ä¿å®‰å…¨æ€§ã€‚

---

## å®æ—¶ç›‘æ§

### WebSocket è¿æ¥

Dashboard ä½¿ç”¨ WebSocket å®ç°å®æ—¶æ¨é€ï¼š

```javascript
// å‰ç«¯ä»£ç ï¼ˆè‡ªåŠ¨è¿æ¥ï¼‰
const ws = new WebSocket('ws://127.0.0.1:8765/ws');

ws.onmessage = (event) => {
    const decision = JSON.parse(event.data);
    addDecisionCard(decision);  // æ·»åŠ æ–°å¡ç‰‡
    updateStats();              // æ›´æ–°ç»Ÿè®¡
};

ws.onerror = () => {
    // å›é€€åˆ° HTTP è½®è¯¢
    setInterval(fetchDecisions, 5000);
};
```

**è¿æ¥çŠ¶æ€ï¼š**
- ğŸŸ¢ ç»¿ç‚¹ - WebSocket å·²è¿æ¥ï¼ˆå®æ—¶æ¨é€ï¼‰
- ğŸ”´ çº¢ç‚¹ - WebSocket æ–­å¼€ï¼ˆHTTP è½®è¯¢ï¼‰

### HTTP è½®è¯¢ï¼ˆå›é€€æ–¹æ¡ˆï¼‰

å¦‚æœ WebSocket è¿æ¥å¤±è´¥ï¼Œè‡ªåŠ¨å›é€€åˆ° HTTP è½®è¯¢ï¼š

```javascript
// æ¯ 5 ç§’æ‹‰å–ä¸€æ¬¡
setInterval(() => {
    fetch('/api/decisions?limit=20')
        .then(res => res.json())
        .then(data => updateDecisions(data));
}, 5000);
```

### æ•°æ®åˆ·æ–°

**å®æ—¶æ•°æ®ï¼š**
- å†³ç­–å¡ç‰‡ - WebSocket æ¨é€ï¼ˆ< 100ms å»¶è¿Ÿï¼‰
- ç»Ÿè®¡æŒ‡æ ‡ - æ¯æ¬¡æ–°å†³ç­–è‡ªåŠ¨æ›´æ–°

**å†å²æ•°æ®ï¼š**
- é¡µé¢åŠ è½½æ—¶è¯»å–æœ€è¿‘ 20 æ¡å†³ç­–
- æ”¯æŒæ»šåŠ¨åŠ è½½æ›´å¤š

---

## æ•°æ®åˆ†æ

### API ç«¯ç‚¹

Dashboard æä¾›ä»¥ä¸‹ API ç«¯ç‚¹ï¼š

#### 1. è·å–å†³ç­–åˆ—è¡¨

```bash
GET /api/decisions?limit=20

# å“åº”
[
    {
        "task_id": "task-001",
        "agent": "debugger",
        "model": "opus-4-6",
        "thinking": "high",
        "reason_codes": ["high_error_rate", "sticky_applied"],
        "confidence": 0.95,
        "decided_at": "2025-02-22T14:30:25Z",
        "decision_time_ms": 15
    },
    ...
]
```

#### 2. è·å–ç»Ÿè®¡ä¿¡æ¯

```bash
GET /api/stats

# å“åº”
{
    "total_decisions": 156,
    "avg_confidence": 0.87,
    "opus_usage": 0.45,
    "avg_latency_ms": 23,
    "agent_distribution": {
        "coder": 45,
        "debugger": 32,
        "optimizer": 28,
        ...
    },
    "model_distribution": {
        "opus-4-6": 70,
        "sonnet-4-5": 86
    }
}
```

#### 3. WebSocket å®æ—¶æ¨é€

```bash
WS /ws

# æ¨é€æ ¼å¼ï¼ˆæ¯æ¬¡æ–°å†³ç­–ï¼‰
{
    "type": "new_decision",
    "data": {
        "task_id": "task-001",
        "agent": "debugger",
        ...
    }
}
```

### ä½¿ç”¨ curl æŸ¥è¯¢

```bash
# è·å–æœ€è¿‘ 10 æ¡å†³ç­–
curl http://127.0.0.1:8765/api/decisions?limit=10 | jq

# è·å–ç»Ÿè®¡ä¿¡æ¯
curl http://127.0.0.1:8765/api/stats | jq

# æŸ¥çœ‹ agent åˆ†å¸ƒ
curl http://127.0.0.1:8765/api/stats | jq '.agent_distribution'

# æŸ¥çœ‹æ¨¡å‹ä½¿ç”¨
curl http://127.0.0.1:8765/api/stats | jq '.model_distribution'
```

### ä½¿ç”¨ Python åˆ†æ

```python
import requests
import json

# è·å–å†³ç­–æ•°æ®
resp = requests.get('http://127.0.0.1:8765/api/decisions?limit=100')
decisions = resp.json()

# åˆ†æç½®ä¿¡åº¦åˆ†å¸ƒ
confidences = [d['confidence'] for d in decisions]
avg_confidence = sum(confidences) / len(confidences)
print(f"Average confidence: {avg_confidence:.2f}")

# åˆ†æ agent ä½¿ç”¨
from collections import Counter
agents = [d['agent'] for d in decisions]
agent_counts = Counter(agents)
print("Agent distribution:")
for agent, count in agent_counts.most_common():
    print(f"  {agent}: {count}")

# åˆ†æå†³ç­–å»¶è¿Ÿ
latencies = [d.get('decision_time_ms', 0) for d in decisions]
avg_latency = sum(latencies) / len(latencies)
print(f"Average latency: {avg_latency:.1f}ms")
```

### å¯¼å‡ºæ•°æ®

```bash
# å¯¼å‡ºå†³ç­–æ—¥å¿—
cp aios/data/router_decisions.jsonl ~/backup/decisions_$(date +%Y%m%d).jsonl

# è½¬æ¢ä¸º CSV
cat aios/data/router_decisions.jsonl | \
  jq -r '[.task_id, .agent, .model, .confidence, .decided_at] | @csv' > decisions.csv

# å¯¼å…¥åˆ°æ•°æ®åº“ï¼ˆç¤ºä¾‹ï¼‰
cat aios/data/router_decisions.jsonl | \
  mongoimport --db aios --collection decisions --type json
```

---

## æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šDashboard æ— æ³•å¯åŠ¨

**ç—‡çŠ¶ï¼š** è¿è¡Œ `python start_dashboard.py` æŠ¥é”™

**å¯èƒ½åŸå› ï¼š**
1. ç«¯å£ 8765 è¢«å ç”¨
2. ç¼ºå°‘ä¾èµ–ï¼ˆfastapi, uvicornï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -ano | findstr 8765  # Windows
lsof -i :8765                # Linux/Mac

# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /PID <PID> /F       # Windows
kill -9 <PID>                # Linux/Mac

# å®‰è£…ä¾èµ–
pip install fastapi uvicorn websockets

# ä½¿ç”¨å…¶ä»–ç«¯å£
uvicorn dashboard.router_dashboard:app --port 8766
```

### é—®é¢˜ 2ï¼šæ— å†³ç­–å¡ç‰‡æ˜¾ç¤º

**ç—‡çŠ¶ï¼š** Dashboard å¯åŠ¨æˆåŠŸï¼Œä½†æ— å¡ç‰‡æ˜¾ç¤º

**å¯èƒ½åŸå› ï¼š**
1. å†³ç­–æ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨
2. ä½¿ç”¨ simple æ¨¡å¼ï¼ˆä¸å†™æ—¥å¿—ï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
ls -lh aios/data/router_decisions.jsonl

# å¦‚æœä¸å­˜åœ¨ï¼Œåˆ‡æ¢åˆ° full æ¨¡å¼
# åœ¨ä»£ç ä¸­ï¼š
router = UnifiedRouter(mode="full", data_dir="aios/data")

# æ‰‹åŠ¨åˆ›å»ºæµ‹è¯•æ•°æ®
echo '{"task_id":"test-001","agent":"coder","model":"opus-4-6","thinking":"medium","reason_codes":["ç¼–ç ä»»åŠ¡"],"confidence":0.8,"decided_at":"2025-02-22T14:00:00Z","decision_time_ms":10}' >> aios/data/router_decisions.jsonl
```

### é—®é¢˜ 3ï¼šWebSocket è¿æ¥å¤±è´¥

**ç—‡çŠ¶ï¼š** é¡µé¢æ˜¾ç¤ºçº¢ç‚¹ï¼Œæ— å®æ—¶æ¨é€

**å¯èƒ½åŸå› ï¼š**
1. é˜²ç«å¢™é˜»æ­¢ WebSocket
2. ä»£ç†æœåŠ¡å™¨ä¸æ”¯æŒ WebSocket

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# æ£€æŸ¥ WebSocket è¿æ¥
# æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

# ä½¿ç”¨ HTTP è½®è¯¢ï¼ˆè‡ªåŠ¨å›é€€ï¼‰
# Dashboard ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° HTTP è½®è¯¢æ¨¡å¼

# é…ç½®é˜²ç«å¢™å…è®¸ WebSocket
# Windows: æ§åˆ¶é¢æ¿ â†’ é˜²ç«å¢™ â†’ é«˜çº§è®¾ç½® â†’ å…¥ç«™è§„åˆ™
# Linux: sudo ufw allow 8765/tcp
```

### é—®é¢˜ 4ï¼šç»Ÿè®¡æ•°æ®ä¸å‡†ç¡®

**ç—‡çŠ¶ï¼š** ç»Ÿè®¡æŒ‡æ ‡ä¸å®é™…ä¸ç¬¦

**å¯èƒ½åŸå› ï¼š**
1. æ—¥å¿—æ–‡ä»¶æŸå
2. ç¼“å­˜æœªæ¸…é™¤

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# éªŒè¯æ—¥å¿—æ–‡ä»¶
cat aios/data/router_decisions.jsonl | jq . > /dev/null
# å¦‚æœæŠ¥é”™ï¼Œè¯´æ˜æ–‡ä»¶æŸå

# æ¸…é™¤æŸåçš„è¡Œ
cat aios/data/router_decisions.jsonl | jq -c . > temp.jsonl
mv temp.jsonl aios/data/router_decisions.jsonl

# åˆ·æ–°æµè§ˆå™¨ç¼“å­˜
# Ctrl+Shift+R (Chrome/Firefox)
# Cmd+Shift+R (Mac)
```

### é—®é¢˜ 5ï¼šå†³ç­–å»¶è¿Ÿè¿‡é«˜

**ç—‡çŠ¶ï¼š** å¹³å‡å»¶è¿Ÿ > 100ms

**å¯èƒ½åŸå› ï¼š**
1. ä½¿ç”¨ full æ¨¡å¼ï¼ˆæŠ¤æ å¼€é”€ï¼‰
2. ç£ç›˜ I/O æ…¢ï¼ˆæ—¥å¿—å†™å…¥ï¼‰

**è§£å†³æ–¹æ¡ˆï¼š**

```bash
# åˆ‡æ¢åˆ° simple æ¨¡å¼
router = UnifiedRouter(mode="simple")

# ä¼˜åŒ–æ—¥å¿—å†™å…¥ï¼ˆæ‰¹é‡å†™å…¥ï¼‰
# production_router.py
def _log_decision(self, plan: Plan):
    # ä½¿ç”¨ç¼“å†²åŒºï¼Œæ¯ 10 æ¡å†™å…¥ä¸€æ¬¡
    self.decision_buffer.append(plan)
    if len(self.decision_buffer) >= 10:
        self._flush_buffer()

# ä½¿ç”¨ SSD å­˜å‚¨æ—¥å¿—
# å°† data_dir æŒ‡å‘ SSD åˆ†åŒº
```

---

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰å¡ç‰‡æ ·å¼

ç¼–è¾‘ `dashboard/router_dashboard.py` ä¸­çš„ CSSï¼š

```css
/* ä¿®æ”¹å¡ç‰‡é¢œè‰² */
.decision-card {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

/* ä¿®æ”¹é«˜ç½®ä¿¡åº¦è¾¹æ¡† */
.decision-card.high-confidence {
    border-left: 4px solid #10b981;  /* ç»¿è‰² */
}

/* ä¿®æ”¹ä½ç½®ä¿¡åº¦è¾¹æ¡† */
.decision-card.low-confidence {
    border-left: 4px solid #ef4444;  /* çº¢è‰² */
}
```

### æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡

```python
# dashboard/router_dashboard.py

@app.get("/api/stats")
async def get_stats():
    decisions = get_recent_decisions(limit=1000)
    
    # è‡ªå®šä¹‰æŒ‡æ ‡ï¼šå¤±è´¥ç‡
    failure_count = sum(1 for d in decisions if d.get('agent') == 'needs_human')
    failure_rate = failure_count / len(decisions) if decisions else 0
    
    # è‡ªå®šä¹‰æŒ‡æ ‡ï¼šå¹³å‡å¤æ‚åº¦
    complexities = [d.get('input_snapshot', {}).get('complexity', 0) for d in decisions]
    avg_complexity = sum(complexities) / len(complexities) if complexities else 0
    
    return {
        "total_decisions": len(decisions),
        "failure_rate": failure_rate,
        "avg_complexity": avg_complexity,
        ...
    }
```

### å¯¼å‡ºæŠ¥å‘Š

```python
# ç”Ÿæˆ HTML æŠ¥å‘Š
import json
from datetime import datetime

decisions = get_recent_decisions(limit=1000)

html = f"""
<html>
<head><title>AIOS Router Report</title></head>
<body>
<h1>AIOS Router Report</h1>
<p>Generated: {datetime.now()}</p>
<h2>Summary</h2>
<ul>
  <li>Total Decisions: {len(decisions)}</li>
  <li>Avg Confidence: {sum(d['confidence'] for d in decisions) / len(decisions):.2f}</li>
</ul>
<h2>Decisions</h2>
<table border="1">
  <tr><th>Task ID</th><th>Agent</th><th>Model</th><th>Confidence</th></tr>
  {''.join(f'<tr><td>{d["task_id"]}</td><td>{d["agent"]}</td><td>{d["model"]}</td><td>{d["confidence"]:.2f}</td></tr>' for d in decisions)}
</table>
</body>
</html>
"""

with open('report.html', 'w') as f:
    f.write(html)
```

---

## æ€»ç»“

AIOS Dashboard æä¾›äº†å¼ºå¤§çš„å®æ—¶ç›‘æ§å’Œå†³ç­–å®¡è®¡åŠŸèƒ½ï¼š

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- å®æ—¶å†³ç­–å¡ç‰‡ï¼ˆWebSocket æ¨é€ï¼‰
- ç»Ÿè®¡æŒ‡æ ‡ï¼ˆAgent åˆ†å¸ƒã€æ¨¡å‹ä½¿ç”¨ã€å†³ç­–å»¶è¿Ÿï¼‰
- å†³ç­–å®¡è®¡ï¼ˆå®Œæ•´çš„å†³ç­–å†å²å’Œç†ç”±ï¼‰
- ç½®ä¿¡åº¦åˆ†æï¼ˆå†³ç­–è´¨é‡è¯„ä¼°ï¼‰

**ä½¿ç”¨åœºæ™¯ï¼š**
- å¼€å‘è°ƒè¯• - å®æ—¶æŸ¥çœ‹è·¯ç”±å†³ç­–
- ç”Ÿäº§ç›‘æ§ - ç›‘æ§ç³»ç»Ÿå¥åº·åº¦
- æ€§èƒ½åˆ†æ - åˆ†æå†³ç­–å»¶è¿Ÿå’Œè´¨é‡
- å®¡è®¡åˆè§„ - å®Œæ•´çš„å†³ç­–å†å²è®°å½•

**æœ€ä½³å®è·µï¼š**
- ä½¿ç”¨ full æ¨¡å¼ç”Ÿæˆå†³ç­–æ—¥å¿—
- å®šæœŸå¤‡ä»½å†³ç­–æ—¥å¿—æ–‡ä»¶
- ç›‘æ§ç»Ÿè®¡æŒ‡æ ‡ï¼ˆç½®ä¿¡åº¦ã€å»¶è¿Ÿï¼‰
- åˆ†æä½ç½®ä¿¡åº¦å†³ç­–ï¼Œä¼˜åŒ–è·¯ç”±é€»è¾‘

æ›´å¤šä¿¡æ¯è¯·å‚è€ƒï¼š
- [UnifiedRouter Guide](../agent_system/UNIFIED_ROUTER_GUIDE.md) - è·¯ç”±å™¨ä½¿ç”¨æŒ‡å—
- [Developer Guide](../agent_system/DEVELOPER_GUIDE.md) - å¼€å‘è€…æŒ‡å—
